{% extends '../layouts/layout.html' %}
{% block main %}
<form method="get" action="/show" class="form-inline" role="form">
<div class="container">
    <div class="row converter_form">        
            <div class="form-group">  
                <input type="text" class="form-control small_input" name="amount" id="amount" value="1"/> 
            </div>
            <div class="form-group">
                <select id="from" name="from" class="form-control">     
                    {% for short_name in Object.keys( currencies ) %}
                    {% if short_name == 'BTC' || short_name == 'XAU'|| short_name == 'AFN' %}
                        <option value="" disabled>—————————————</option>
                    {% endif %} 
                        <option value="{{short_name}}">{{short_name}} - {{currencies[short_name]}}</option>
                    {% endfor %}
                </select>
                <a href="javascript:;" onclick="swap()" class="btn btn-default">&lt;&gt;</a>
            </div>
            <div class="form-group">
                <select id="to" name="to" class="form-control my_select">
                    {% for short_name in Object.keys( currencies ) %}
                    {% if short_name == 'BTC' || short_name == 'XAU'|| short_name == 'AFN' %}<option value="" disabled>—————————————</option>{% endif %}<option value="{{short_name}}">{{short_name}} - {{currencies[short_name]}}</option>{% endfor %}
                </select>
            </div>
            <button value="1day" name="view" class="btn btn-default" type="submit">Get Rate</button>
    </div>
  </div>
<br>
<div class="container">
<div class="row"> 
<div class="col-md-1">  
</div>
  <div class="col-md-1">  
    <button class="btn btn-default btn-xs custom_button btn-info" type="submit" name="view" id="1day" value="1day">1 day</button> <br>
    <button class="btn btn-default btn-xs btn-info custom_button" type="submit" name="view" id="1week" value="1week">1 week</button><br>
    <button class="btn btn-default btn-xs btn-info custom_button" type="submit" name="view" id="1month" value="1month">1 month</button> <br>
    <button class="btn btn-default btn-xs btn-info custom_button" type="submit" name="view" id="3months" value="3months">3 months</button> <br>
    <button class="btn btn-default btn-xs btn-info custom_button" type="submit" name="view" id="1year" value="1year">1 year</button> <br>
    <button class="btn btn-default btn-xs btn-info custom_button" type="submit" name="view" id="2years" value="2years">2 years</button> <br>
    <button class="btn btn-default btn-xs btn-info custom_button" type="submit" name="view" id="5years" value="5years">5 years</button> <br>
  </div>
  <div class="col-md-7">     
    <div id="rateschart" style='height: 300px; width: 680px;'></div>
  </div>  
  <div class="col-md-2">
  <p class="pull-left"><span class="label label-info">1 {{from}} = {{current_rate}} {{to}}</span> </p>
  {% if amount != 1%}
    <p class="pull-left"><span class="label label-info">{{amount}} {{from}} = {{result}} {{to}}</span></p>
  {% endif %}
  </div>
</div>
</div>
</form>
<div class="container"><hr></div>
{% endblock %}
{% block script %}
<script src="https://apis.google.com/js/platform.js" async defer></script>
<script src="//code.highcharts.com/stock/highstock.js"></script>
<script type="text/javascript">
    function swap(){
        var tmp = document.getElementById("from").value;
        document.getElementById("from").value = document.getElementById("to").value;
        document.getElementById("to").value = tmp;
    }
$(function(){
  $("#{{view}}").removeClass("btn-info").addClass("btn-default");
  $('#from').val("{{from}}");
  $('#to').val("{{to}}");
  $('#amount').val("{{amount}}");
  $('#rateschart').highcharts('StockChart', {
      chart: {
      plotBorderWidth: 1
    },
    colors: ['#5bc0de'],
    yAxis: {
      opposite: false
    },
      rangeSelector : {
          enabled : false
      },              
      navigator : {
          enabled : false
      },
      scrollbar : {
          enabled : false
      },            
      series : [{
          name : 'value',
          data : {{ chart_data }},
          tooltip: {
              valueDecimals: 4
          }
      }]
  });
})
// FA7D0A
</script>
{% endblock %}

